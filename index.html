<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marco's Decision Tools</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#475569">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes coin-flip {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(1800deg); }
    }
    .coin-flipping {
      animation: coin-flip 1s ease-out;
    }
    .coin {
      transform-style: preserve-3d;
      transition: transform 0.1s;
    }
    .coin:active {
      transform: scale(0.95);
    }
  </style>
  <script>
    // Hide install prompt only when truly running as installed app
    document.addEventListener('DOMContentLoaded', function() {
      if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
        var prompt = document.querySelector('.install-prompt');
        if (prompt) prompt.style.display = 'none';
      }
    });
  </script>
</head>
<body class="bg-gradient-to-br from-slate-100 to-gray-200 min-h-screen p-6">
  <div class="max-w-md mx-auto">
    <h1 class="text-2xl font-bold text-gray-800 mb-2">Marco's Decision Tools</h1>
    <p class="text-gray-500 mb-6">Tools to help you make decisions</p>

    <div class="install-prompt mb-6 p-4 bg-white/70 rounded-xl text-sm text-slate-700 border border-slate-200">
      <strong>Install as App</strong>
      <details class="mt-2">
        <summary class="cursor-pointer text-slate-600 hover:text-slate-800">Android (Chrome)</summary>
        <ol class="mt-2 ml-4 list-decimal text-slate-600 space-y-1">
          <li>Tap the menu icon (three dots) in the top right</li>
          <li>Tap "Add to Home screen"</li>
          <li>Tap "Add" to confirm</li>
        </ol>
      </details>
      <details class="mt-2">
        <summary class="cursor-pointer text-slate-600 hover:text-slate-800">iPhone (Safari)</summary>
        <ol class="mt-2 ml-4 list-decimal text-slate-600 space-y-1">
          <li>Tap the Share button (square with arrow) at the bottom</li>
          <li>Scroll down and tap "Add to Home Screen"</li>
          <li>Tap "Add" in the top right</li>
        </ol>
      </details>
    </div>

    <!-- Coin Flipper -->
    <details class="mb-6 bg-white/70 rounded-xl border border-slate-200" open>
      <summary class="p-4 cursor-pointer text-sm font-medium text-slate-700 flex items-center justify-between">
        <span>Quick Coin Flip</span>
        <svg class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>
      <div class="px-4 pb-4">
        <div class="flex items-center justify-between">
          <p class="text-xs text-slate-500">Tap the coin to flip</p>
          <button
            id="coin"
            onclick="flipCoin()"
            class="coin w-16 h-16 rounded-full bg-gradient-to-br from-yellow-300 via-yellow-400 to-yellow-500 shadow-lg flex items-center justify-center text-2xl font-bold text-yellow-800 border-4 border-yellow-500 hover:shadow-xl cursor-pointer select-none"
          >
            <span id="coin-face">?</span>
          </button>
        </div>
        <p id="coin-result" class="text-center text-sm font-medium text-slate-600 mt-2 h-5"></p>
      </div>
    </details>

    <script>
      let flipTimeout = null;

      function flipCoin() {
        const coin = document.getElementById('coin');
        const face = document.getElementById('coin-face');
        const result = document.getElementById('coin-result');

        // Clear any existing timeout
        if (flipTimeout) {
          clearTimeout(flipTimeout);
        }

        // Restart animation by removing and re-adding class
        coin.classList.remove('coin-flipping');
        void coin.offsetWidth; // Force reflow to restart animation
        coin.classList.add('coin-flipping');
        face.textContent = '';
        result.textContent = '';

        // Determine result
        const isHeads = Math.random() < 0.5;

        // Show result after animation
        flipTimeout = setTimeout(() => {
          coin.classList.remove('coin-flipping');
          face.textContent = isHeads ? 'H' : 'T';
          result.textContent = isHeads ? 'Heads!' : 'Tails!';
          flipTimeout = null;
        }, 1000);
      }
    </script>

    <!-- Interactive Tool Finder -->
    <details class="mb-6 bg-white/70 rounded-xl border border-slate-200" id="tool-finder" open>
      <summary class="p-4 cursor-pointer text-sm font-medium text-slate-700 flex items-center justify-between">
        <span>Find The Right Decision Tool</span>
        <svg class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>
      <div class="px-4 pb-4">

      <!-- Recommendation (at top so thumb doesn't cover it) -->
      <p class="text-xs text-slate-500 mb-2">Recommendation:</p>
      <div id="recommendation" class="p-3 rounded-lg border-2 transition-all mb-8">
        <!-- Filled by JS -->
      </div>

      <!-- Solo vs Group toggle -->
      <div class="mb-4">
        <p class="text-xs text-slate-500 mb-2">Who's deciding?</p>
        <div class="flex gap-2">
          <button onclick="setGroup(false)" id="btn-solo" class="flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-700 text-white">
            üë§ Just me
          </button>
          <button onclick="setGroup(true)" id="btn-group" class="flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-100 text-slate-600 hover:bg-slate-200">
            üë• Group
          </button>
        </div>
      </div>

      <!-- Rationality slider -->
      <div id="rationality-section">
        <p class="text-xs text-slate-500 mb-2">How do you want to decide?</p>
        <div class="flex items-center gap-3">
          <span class="text-xs text-slate-500">üß† Logical</span>
          <input type="range" id="rationality-slider" min="1" max="5" value="3"
            class="flex-1 h-2 bg-gradient-to-r from-cyan-400 via-violet-400 to-purple-600 rounded-lg appearance-none cursor-pointer"
            oninput="updateRecommendation()">
          <span class="text-xs text-slate-500">‚ú® Vibes</span>
        </div>
      </div>
      </div>
    </details>

    <script>
      let isGroup = false;
      let rationality = 3;

      const tools = {
        matrix: { name: 'Decision Matrix', emoji: 'üìä', href: 'tools/decision-matrix.html', desc: 'Analyze options with decision theory', rationality: 1, group: false },
        ranker: { name: 'Choice Ranker', emoji: '‚öñÔ∏è', href: 'tools/choice-ranker.html', desc: 'Compare options head-to-head', rationality: 2, group: false },
        narrower: { name: 'Choice Narrower', emoji: 'üé≤', href: 'tools/choice-narrower.html', desc: 'Randomly eliminate until one remains', rationality: 3, group: false },
        battle: { name: 'Decision Battle', emoji: '‚öîÔ∏è', href: 'tools/decision-battle.html', desc: 'Gamified battles reveal your heart', rationality: 4, group: false },
        numerology: { name: 'Decision Numerology', emoji: 'üîÆ', href: 'tools/decision-numerology.html', desc: 'Let cosmic numbers guide you', rationality: 5, group: false },
        vote: { name: 'Team List Vote', emoji: 'üó≥Ô∏è', href: 'tools/ordered-list-vote.html', desc: 'Collect ranked votes from everyone', rationality: 2, group: true },
      };

      function setGroup(val) {
        isGroup = val;
        document.getElementById('btn-solo').className = !isGroup
          ? 'flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-700 text-white'
          : 'flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-100 text-slate-600 hover:bg-slate-200';
        document.getElementById('btn-group').className = isGroup
          ? 'flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-700 text-white'
          : 'flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all bg-slate-100 text-slate-600 hover:bg-slate-200';
        document.getElementById('rationality-section').style.display = isGroup ? 'none' : 'block';
        updateRecommendation();
      }

      function updateRecommendation() {
        rationality = parseInt(document.getElementById('rationality-slider').value);
        const rec = document.getElementById('recommendation');

        let tool;
        if (isGroup) {
          tool = tools.vote;
        } else {
          // Find closest match to rationality level
          const soloTools = Object.values(tools).filter(t => !t.group);
          tool = soloTools.reduce((best, t) =>
            Math.abs(t.rationality - rationality) < Math.abs(best.rationality - rationality) ? t : best
          );
        }

        const colors = {
          1: { bg: 'bg-cyan-50', border: 'border-cyan-300', text: 'text-cyan-800' },
          2: { bg: 'bg-red-50', border: 'border-red-300', text: 'text-red-800' },
          3: { bg: 'bg-violet-50', border: 'border-violet-300', text: 'text-violet-800' },
          4: { bg: 'bg-slate-100', border: 'border-red-400', text: 'text-red-900' },
          5: { bg: 'bg-purple-100', border: 'border-purple-400', text: 'text-purple-900' },
        };
        const c = colors[tool.rationality] || colors[3];

        rec.className = `p-3 rounded-lg border-2 transition-all mb-8 ${c.bg} ${c.border}`;
        rec.innerHTML = `
          <a href="${tool.href}" class="block">
            <div class="flex items-center gap-3">
              <span class="text-2xl">${tool.emoji}</span>
              <div>
                <p class="font-semibold ${c.text}">${tool.name}</p>
                <p class="text-xs ${c.text}/70">${tool.desc}</p>
              </div>
              <svg class="w-5 h-5 ml-auto ${c.text}/50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </a>
        `;
      }

      // Initialize
      updateRecommendation();
    </script>

    <details class="mb-6 bg-white/70 rounded-xl border border-slate-200">
      <summary class="p-4 cursor-pointer text-sm font-medium text-slate-700 flex items-center justify-between">
        <span>Show All Tools</span>
        <svg class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>
      <div class="px-4 pb-4 space-y-3" id="tool-list">
        <!-- Decision Matrix: Cyan/teal analytical theme -->
        <a href="tools/decision-matrix.html" class="block p-4 bg-gradient-to-r from-cyan-50 to-teal-50 rounded-xl shadow-sm hover:shadow-md transition-all hover:scale-[1.02] border border-cyan-200/50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">üìä</span>
            <div>
              <div class="font-semibold text-cyan-800">Decision Matrix</div>
              <div class="text-sm text-cyan-600/70">Decision theory, the most logical way to make a decision</div>
            </div>
          </div>
        </a>

        <!-- Choice Ranker: Warm red/orange ranking theme -->
        <a href="tools/choice-ranker.html" class="block p-4 bg-gradient-to-r from-red-100 to-orange-100 rounded-xl shadow-sm hover:shadow-md transition-all hover:scale-[1.02] border border-red-300/50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">‚öñÔ∏è</span>
            <div>
              <div class="font-semibold text-red-800">Choice Ranker</div>
              <div class="text-sm text-red-600/70">Compare options two at a time to find your true preference order</div>
            </div>
          </div>
        </a>

        <!-- Choice Narrower: Violet/indigo elimination theme -->
        <a href="tools/choice-narrower.html" class="block p-4 bg-gradient-to-r from-violet-50 to-indigo-50 rounded-xl shadow-sm hover:shadow-md transition-all hover:scale-[1.02] border border-violet-200/50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">üé≤</span>
            <div>
              <div class="font-semibold text-violet-800">Choice Narrower</div>
              <div class="text-sm text-violet-600/70">Randomly eliminate options until only the best remain</div>
            </div>
          </div>
        </a>

        <!-- Team List Vote: Orange/amber voting theme -->
        <a href="tools/ordered-list-vote.html" class="block p-4 bg-gradient-to-r from-orange-100 to-amber-100 rounded-xl shadow-sm hover:shadow-md transition-all hover:scale-[1.02] border border-orange-300/50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">üó≥Ô∏è</span>
            <div>
              <div class="font-semibold text-orange-800">Team List Vote</div>
              <div class="text-sm text-orange-600/70">Collect ranked votes from a group to find the consensus favorite</div>
            </div>
          </div>
        </a>

        <!-- Decision Battle: Dark red/fiery battle theme -->
        <a href="tools/decision-battle.html" class="block p-4 bg-gradient-to-r from-slate-800 to-red-900 rounded-xl shadow-md hover:shadow-lg transition-all hover:scale-[1.02] border border-red-700/30">
          <div class="flex items-center gap-3">
            <span class="text-2xl">‚öîÔ∏è</span>
            <div>
              <div class="font-semibold text-red-100">Decision Battle</div>
              <div class="text-sm text-red-300/80">Your choices become monsters, discover which your heart favors</div>
            </div>
          </div>
        </a>

        <!-- Decision Numerology: Dark purple mystical theme -->
        <a href="tools/decision-numerology.html" class="block p-4 bg-gradient-to-r from-indigo-950 to-purple-900 rounded-xl shadow-md hover:shadow-lg transition-all hover:scale-[1.02] border border-purple-500/30">
          <div class="flex items-center gap-3">
            <span class="text-2xl">üîÆ</span>
            <div>
              <div class="font-semibold text-purple-200">Decision Numerology</div>
              <div class="text-sm text-purple-300/80">Let cosmic numbers guide your choices</div>
            </div>
          </div>
        </a>
      </div>
    </details>

    <p class="text-center text-gray-400 text-xs mt-8">
      Works offline ‚Ä¢ Add to home screen for best experience
    </p>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then((reg) => console.log('SW registered', reg.scope))
        .catch(err => console.log('SW failed:', err));
    }
  </script>
</body>
</html>
